buildscript {
    dependencies {
        classpath "com.github.node-gradle:gradle-node-plugin:3.1.0"
    }
}

plugins {
    id "com.github.node-gradle.node" version "3.1.0"
}


node {
    download = false
}

//task startScript(type: NodeTask, dependsOn: 'npmInstall') {
tasks.register('startScript', NodeTask) {
	dependsOn 'nmpInstall'
	println "This is the startScript task"
	script = file("bin/www")
}

//declare a task to create a zip of the app
tasks.register('packageDistribution', Zip) {
	doFirst {
		println "creating package distribution"
	}
	archiveFileName = "train-schedule.zip"
	destinationDirectory = layout.projectDirectory.dir('dist')

	from(layout.projectDirectory) {
		include "*", "bin/**", "data/**", "node_modules/**", "public/**", "routes/**", "views/**"
	}
}


//declare task dependencies
//build.dependsOn zip
//zip.dependsOn npm_build
//npm_build.dependsOn npm_test
//npm_test.dependsOn npmInstall
//npm_build.dependsOn npmInstall